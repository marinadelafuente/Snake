"use strict";const grid=document.querySelector(".grid"),startBtn=document.querySelector(".btn__start"),resetBtn=document.querySelector(".btn__reset");let scoreDisplay=document.querySelector(".score");const gridWidth=10;let intervalId,mySound,currentIndex=0,appleIndex=0,squares=[],currentSnake=[2,1,0],direction=1,score=0,intervalTime=1e3;const createGrid=()=>{for(let e=0;e<100;e++){const e=document.createElement("div");e.classList.add("square"),grid.appendChild(e),squares.push(e)}};createGrid();const paintSnake=()=>{currentSnake.forEach(e=>{squares[e].classList.add("snake"),squares[currentSnake[0]].classList.add("snake__head")})};function sound(e){this.sound=document.createElement("audio"),this.sound.src=e,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}}paintSnake();const startGame=()=>{generateApples(),intervalId=setInterval(moveSnake,intervalTime),startBtn.style.pointerEvents="none",startBtn.classList.replace("btn","unavailable")},moveSnake=()=>{if(currentSnake[0]+10>=100&&10===direction||currentSnake[0]%10==9&&1===direction||currentSnake[0]%10==0&&-1===direction||currentSnake[0]-10<0&&-10===direction||squares[currentSnake[0]+direction].classList.contains("snake"))return clearInterval(intervalId),currentSnake.forEach(e=>{squares[e].classList.add("game-over")}),setTimeout(reset,2e3);let e=currentSnake.pop();squares[e].classList.remove("snake"),squares[e].classList.remove("snake__head"),currentSnake.unshift(currentSnake[0]+direction);let s=currentSnake[0];afterAppleEating(e),squares[s].classList.add("snake"),currentSnake.forEach(e=>{squares[e].classList.add("snake"),squares[e].classList.remove("snake__head","snake__head-down","snake__head-left")}),10===direction?squares[s].classList.add("snake__head-down"):-1===direction?squares[s].classList.add("snake__head-left"):squares[s].classList.add("snake__head")},afterAppleEating=e=>{squares[currentSnake[0]].classList.contains("apple")&&(mySound=new sound("./assets/sounds/tink.wav"),mySound.play(),squares[appleIndex].classList.remove("apple"),squares[e].classList.add("snake"),currentSnake.push(e),generateApples(),score++,scoreDisplay.textContent=score,clearInterval(intervalId),intervalTime*=.9,intervalId=setInterval(moveSnake,intervalTime))},generateApples=()=>{do{appleIndex=Math.floor(Math.random()*squares.length)}while(squares[appleIndex].classList.contains("snake"));squares[appleIndex].classList.add("apple")},controlMove=e=>{squares[currentIndex].classList.remove("snake"),38===e.keyCode?direction=-10:40===e.keyCode?direction=10:37===e.keyCode?direction=-1:39===e.keyCode&&(direction=1)},reset=()=>{currentSnake.forEach(e=>{squares[e].classList.remove("snake","snake__head","snake__head-down","snake__head-left","game-over")}),squares[appleIndex].classList.remove("apple"),startBtn.style.pointerEvents="auto",startBtn.classList.add("btn"),startBtn.classList.remove("unavailable"),currentSnake=[2,1,0],currentIndex=0,paintSnake(),score=0,scoreDisplay.textContent=score,direction=1,intervalTime=1e3},resetAndStop=()=>{clearInterval(intervalId),reset(),clearInterval(intervalId)};document.addEventListener("keyup",controlMove),startBtn.addEventListener("click",startGame),resetBtn.addEventListener("click",resetAndStop);