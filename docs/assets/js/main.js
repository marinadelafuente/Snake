"use strict";const grid=document.querySelector(".grid"),startBtn=document.querySelector(".btn__start"),resetBtn=document.querySelector(".btn__reset");let scoreDisplay=document.querySelector(".score");const gridWidth=10;let intervalId,currentIndex=0,appleIndex=0,squares=[],currentSnake=[2,1,0],direction=1,score=0,intervalTime=1e3;const createGrid=()=>{for(let e=0;e<100;e++){const e=document.createElement("div");e.classList.add("square"),grid.appendChild(e),squares.push(e)}};createGrid();const paintSnake=()=>{console.log("paint"),currentSnake.forEach(e=>{squares[e].classList.add("snake")})};paintSnake();const startGame=()=>{generateApples(),intervalId=setInterval(moveSnake,intervalTime)},moveSnake=()=>{if(currentSnake[0]+10>=100&&10===direction||currentSnake[0]%10==9&&1===direction||currentSnake[0]%10==0&&-1===direction||currentSnake[0]-10<0&&-10===direction||squares[currentSnake[0]+direction].classList.contains("snake"))return console.log("reset"),clearInterval(intervalId),currentSnake.forEach(e=>{squares[e].classList.add("game-over")}),setTimeout(reset,2e3);let e=currentSnake.pop();squares[e].classList.remove("snake"),currentSnake.unshift(currentSnake[0]+direction),afterAppleEating(e),squares[currentSnake[0]].classList.add("snake")},afterAppleEating=e=>{squares[currentSnake[0]].classList.contains("apple")&&(squares[appleIndex].classList.remove("apple"),squares[e].classList.add("snake"),currentSnake.push(e),generateApples(),score++,scoreDisplay.textContent=score,clearInterval(intervalId),intervalTime*=.9,intervalId=setInterval(moveSnake,intervalTime))},generateApples=()=>{do{appleIndex=Math.floor(Math.random()*squares.length)}while(squares[appleIndex].classList.contains("snake"));squares[appleIndex].classList.add("apple")},controlMove=e=>{squares[currentIndex].classList.remove("snake"),38===e.keyCode?direction=-10:40===e.keyCode?direction=10:37===e.keyCode?direction=-1:39===e.keyCode&&(direction=1)},reset=()=>{currentSnake.forEach(e=>{squares[e].classList.remove("snake"),squares[e].classList.remove("game-over")}),squares[appleIndex].classList.remove("apple"),currentSnake=[2,1,0],currentIndex=0,paintSnake(),score=0,scoreDisplay.textContent=score,direction=1,intervalTime=1e3},resetAndStop=()=>{clearInterval(intervalId),reset()};document.addEventListener("keyup",controlMove),startBtn.addEventListener("click",startGame),resetBtn.addEventListener("click",resetAndStop);